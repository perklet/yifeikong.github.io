<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Yifei Kong | 我的编码规范</title>
    <link rel="shortcut icon" type="image/png" href="/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link href="/feed/atom-all.xml" type="application/atom+xml" rel="alternate" title="Yifei Kong Full Atom Feed" />
    <link href="/feed/rss-all.xml" type="application/rss+xml" rel="alternate" title="Yifei Kong Full RSS Feed" />
    <link href="/feed/atom.xml" type="application/atom+xml" rel="alternate" title="Yifei Kong Atom Feed" />
    <link href="/feed/rss.xml" type="application/rss+xml" rel="alternate" title="Yifei Kong RSS Feed" />
    <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/pygments.css" type="text/css" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Yifei Kong" />

    <meta name="keywords" content="想法,计算机" />
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="https://github.com/">GitHub</a></li>
                <li><a href="/tags">Tags</a></li>
                <li><a href="/categories">Categories</a></li>
                <li><a href="/archives">Archives</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="/">Yifei Kong</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Aug 05, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="/posts/wo-de-bian-ma-gui-fan.html" rel="bookmark" title="Permanent Link to &quot;我的编码规范&quot;">我的编码规范</a>
                </h2>

                
                

                <h1>指导思想</h1>
<p>代码要做到<a href="http://jixianqianduan.com/article-translation/2016/06/22/ways-to-write-self-documenting-js.html">自文档化</a></p>
<h1>Python</h1>
<ul>
<li>util模块使用util.py（单数形式），而不是utils.py，因为python标准库使用的是util</li>
<li>模块的命名：如果只有一个类，比如ItemProcessor，那么可以命名为item_processor.py，否则不能使用名词命名，使用描述性的短语『名词+动词』</li>
</ul>
<h2>django</h2>
<ul>
<li>使用 queryset 的时候尽量使用 <code>.only()</code>，以减少对数据库的压力</li>
</ul>
<h1>devops</h1>
<ul>
<li>using mosh is recommended over plain ssh</li>
<li>using tmux is recommended over screen</li>
<li>all directories/repositories should use underscore NOT hyphen</li>
<li>应该使用json schema来验证json是否合规</li>
<li>每一个调用方都应该使用token或者caller来表明自己的身份，拒绝任何没有声明身份的服务。而生成token应该使用库来实现，而不是服务，以避免所有的服务都依赖token检测。</li>
</ul>
<h1>coding</h1>
<ul>
<li>变量跨越的行数太多，否则不能看懂其中变量的用途，尽量是变量的生存周期短</li>
<li>函数不能写太多行（20行以内为宜，最多40行），不然读起来太费劲了，根本不知道是什么函数，如果太长，需要拆分</li>
<li>不要去变换API的签名，如果需要更改，做一个新的版本</li>
<li>如果没有很好的名字，使用ret作为返回值的名称</li>
<li>如果协议容易出现问题，那么在thrift中增加一个字version，每次校验是否是同一个版本</li>
<li>variable names should use simple words if possible</li>
<li>不要起名字相同的函数</li>
<li>常量的定义，要把每个维度正交化，使用每个位来表示一个开关，或者几个位来表示一个组合</li>
</ul>
<h1>思维</h1>
<ul>
<li>如果在编码实现的过程中发现实际情况更加复杂，也不要直接改变思路，先实现原先想好的简单情况，在做拓展</li>
<li>类应该是 sans-IO的，如果需要IO，就写一些 load 函数，但是不要在构造函数中调用</li>
</ul>
<h2>Indent, spaces and newline</h2>
<ul>
<li>use spaces around <code>+ - * / = ==</code></li>
<li>use spaces only after <code>,</code> <code>;</code></li>
<li>one blank line between functions and two between classes</li>
<li>use <code>\n</code> as line endings</li>
<li>end file with a new line</li>
<li>always use 4 spaces to indent</li>
<li>always use K&amp;R braces</li>
</ul>
<h2>Naming and variables</h2>
<ul>
<li>never use HN but prefix <code>is</code> for bool flags or methods e.g. <code>is_open</code></li>
<li>use CamelCase for class name</li>
<li>use camelCase or snake_case for function, variable, method name, just be consistent</li>
<li>declare local variable as late as possible</li>
<li>use <code>nullptr</code> not <code>NULL</code></li>
</ul>
<h2>Headers</h2>
<ul>
<li>header file should use <code>*.hpp</code> NOT <code>*.h</code></li>
<li>always use #define guards </li>
<li>Reduce the number of #include files in header files. It will reduce build times. Instead, put include files in source code files and use forward declarations in header files. If a class in a header file does not need to know the size of a data member class or does not need to use the class's members then forward declare the class instead of including the file with #include. To avoid the need of a full class declaration, use references (or pointers) and forward declare the class. </li>
</ul>
<h2>Namespaces</h2>
<ul>
<li>never use <code>using namespace std</code></li>
</ul>
<h2>其他</h2>
<ul>
<li>put a space after <code>if</code> <code>for</code> <code>while</code> so that we know it's not invokation</li>
<li>never use if (someVar == true) or if (someVar == false), it's silly</li>
</ul>
<h2>Documnetation and comments</h2>
<ul>
<li>Documentations explain how to use code, and are for the users of your code</li>
<li>Comments explain why, and are for the maintainers of your code</li>
<li>use javadoc for documentations</li>
<li>use <code>FIX</code> <code>BUG</code> <code>TODO</code> <code>???</code> <code>!!!</code> to show different kinds of comments</li>
</ul>
<p>参考：</p>
<p>http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html
http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml
https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Coding_Style
http://www.yolinux.com/TUTORIALS/LinuxTutorialC++CodingStyle.html</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="/posts/wo-de-bian-ma-gui-fan.html">posted at 03:29</a>
                    &nbsp;&middot;&nbsp;<a href="/category/ji-suan-ji.html" rel="tag">计算机</a>
                    &nbsp;&middot;
                    &nbsp;<a href="/tag/xiang-fa.html" class="tags">想法</a>
                    &nbsp;<a href="/tag/ji-suan-ji.html" class="tags">计算机</a>
                </div>
            </article>
            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="/feed/atom-all.xml" rel="alternate">Atom Feed</a>
                &middot;
                <a href="/feed/rss-all.xml" rel="alternate">Rss Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>